{% load static %}

<div class="col-lg-3 col-md-4 mb-4">
    <div class="card shadow-sm">
        <div class="card-header bg-primary text-white">
            <h6 class="mb-0">
                <i class="bi bi-shop me-2"></i>
                Brand Management
            </h6>
        </div>
        <div class="list-group list-group-flush">
            <a href="{% url 'brands:dashboard' %}" 
               class="list-group-item list-group-item-action {% if request.resolver_match.url_name == 'dashboard' %}active{% endif %}">
                <i class="bi bi-speedometer2 me-2"></i>
                Dashboard
            </a>
            
            <a href="{% url 'brands:templates' %}" 
               class="list-group-item list-group-item-action {% if request.resolver_match.url_name == 'templates' %}active{% endif %}">
                <i class="bi bi-file-earmark-ruled me-2"></i>
                Templates
            </a>
            
            <a href="{% url 'brands:images' %}" 
               class="list-group-item list-group-item-action {% if request.resolver_match.url_name == 'images' %}active{% endif %}">
                <i class="bi bi-images me-2"></i>
                Images
            </a>
            
            <a href="{% url 'brands:image_categories' %}" 
               class="list-group-item list-group-item-action {% if request.resolver_match.url_name == 'image_categories' %}active{% endif %}">
                <i class="bi bi-tags me-2"></i>
                Image Categories
            </a>
            
            <a href="{% url 'brands:settings' %}" 
               class="list-group-item list-group-item-action {% if request.resolver_match.url_name == 'settings' %}active{% endif %}">
                <i class="bi bi-gear me-2"></i>
                Settings
            </a>
            
            <a href="{% url 'brands:earnings' %}" 
               class="list-group-item list-group-item-action {% if request.resolver_match.url_name == 'earnings' %}active{% endif %}">
                <i class="bi bi-graph-up me-2"></i>
                Earnings
            </a>
        </div>
        
        {% if user_brands.count > 1 %}
        <div class="card-footer">
            <small class="text-muted">
                <i class="bi bi-buildings me-1"></i>
                Managing {{ user_brands.count }} brands
            </small>
        </div>
        {% endif %}
    </div>
    
    <!-- Brand Switcher (if user has multiple brands) -->
    {% if user_brands.count > 1 %}
    <div class="card shadow-sm mt-3">
        <div class="card-header">
            <h6 class="mb-0">
                <i class="bi bi-arrow-repeat me-2"></i>
                Switch Brand
            </h6>
        </div>
        <div class="card-body">
            <select class="form-select form-select-sm" id="brandSwitcher">
                {% for brand in user_brands %}
                <option value="{{ brand.slug }}" {% if brand == current_brand %}selected{% endif %}>
                    {{ brand.name }}
                </option>
                {% endfor %}
            </select>
        </div>
    </div>
    {% endif %}
</div>

{% if user_brands.count > 1 %}
<script>
document.getElementById('brandSwitcher').addEventListener('change', function() {
    const brandSlug = this.value;
    // Redirect to current page but for different brand
    const currentPath = window.location.pathname;
    if (currentPath.includes('/settings/')) {
        window.location.href = `/brand/settings/${brandSlug}/`;
    } else {
        // For other pages, just reload with brand context
        window.location.reload();
    }
});
</script>
{% endif %}